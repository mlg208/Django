{% extends "layout/basic.html" %}

{% block content %}

    {{ block.super }}

    <p>
    {% for d in date_list %}
        {{ d.year }} /
        <a href="{% url 'bboard:month' year=d.year month=d.month %}">
            {{ d.year }} - {{ d.month }}</a>
    {% endfor %}
    </p>

{% for bb in bbs|dictsort:'price' %}
{#<div class="{% cycle 'b1' 'b2' 'b3' %}">#}
{#<div style="background-color: {% cycle '#bbccdd' '#ffffcc'  %}">#}
<div>
        <a href="{% url 'bboard:by_rubric' bb.rubric.pk %}">
           {{ forloop.counter }} - {{ bb.title_and_price }}
        {% if forloop.first == True %}
            (Первое объявление)
        {% elif forloop.last == True %}
            (Последнее объявление)
        {% endif %}</a>
    <p>        <a href="{% url 'bboard:by_rubric' bb.rubric.pk %}">
           {{ forloop.counter }} - {{ bb.title_and_price }}
        {% if forloop.first == True %}
            (Первое объявление)
        {% elif forloop.last == True %}
            (Последнее объявление)
        {% endif %}</a>
    </p>
</div>
<div class="{{ currentclass }}">
    <h2>
        {% url 'bboard.detail' bb.pk as detail_url %}
        <a href="{{ detail_url }}"></a>
            {{ bb.rubric.name }}
    </h2>
    <p>{{ bb.content|truncatewords:5|wordwrap:1 }}</p>

    {% ifchanged bb.rubric.name %}
    <p>
        <a href="{% url 'bboard:by_rubric' bb.rubric.pk %}">
            {{ bb.rubric.name }}</a>
    </p>
    {% endifchanged %}
    <p>{{ bb.published|date:"d.m.Y H:i:s" }}</p>
    {% firstof bb.phone bb.email 'на деревню дедушке '%}
</div>
{% endfor %}
{% endblock %}